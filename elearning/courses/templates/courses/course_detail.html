<!-- courses/templates/courses/course_detail.html -->
{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <h2>{{ course.title }}</h2>
        <p>{{ course.description }}</p>
        <p><strong>Teacher:</strong> {{ course.teacher.real_name }}</p>

        {% if user.role == 'Teacher' and user == course.teacher %}
            <a href="{% url 'courses:update-course' course_id=course.id %}" class="btn btn-warning">Edit Course</a>
            <a href="{% url 'courses:delete-course' course_id=course.id %}" class="btn btn-danger">Delete Course</a>
            <a href="{% url 'courses:view-enrolled-students' course_id=course.id %}" class="btn btn-info">View Enrolled Students</a>
            <a href="{% url 'courses:upload-material' course_id=course.id %}" class="btn btn-secondary">Upload Material</a>
        {% endif %}
        {% if user.role == 'Student' %}
            {% if is_enrolled %}
                <p class="mt-3">You are enrolled in this course.</p>
            {% else %}
                <a href="{% url 'courses:enroll-course' course_id=course.id %}" class="btn btn-success">Enroll in Course</a>
            {% endif %}
        {% endif %}
        <hr>
        <h4>Course Materials</h4>
        {% if materials %}
            <ul>
                {% for material in materials %}
                    <li><a href="{{ material.file.url }}" target="_blank">{{ material.title }}</a></li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No materials uploaded yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}