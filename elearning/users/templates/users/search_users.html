{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container mt-4">
    <h2>Search Users</h2>
    <form method="GET">
        <!-- Using GET for search -->
        {{ form|crispy }}
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <hr>

    {% if results %}
        <h4>Results ({{ results|length }})</h4>
        <ul class="list-group">
            {% for user_obj in results %}
                <li class="list-group-item">
                    <strong>{{ user_obj.username }}</strong>
                    <span class="badge bg-info ms-2">{{ user_obj.role }}</span>
                    <br>
                    {{ user_obj.real_name }}
                    <div>
                        <!-- Link to the user's home page (or wherever you want) -->
                        <a href="{% url 'users:user-home' username=user_obj.username %}">View Profile</a>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No users found.</p>
    {% endif %}
</div>
{% endblock %}